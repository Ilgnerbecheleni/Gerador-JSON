<!DOCTYPE html>
<html>
    <head>
        <title>Formulário editável</title>
        <!-- Inclua o CSS do Bootstrap -->
        <link rel="stylesheet" href="
            https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
        <!-- Adicione o viewport meta tag para tornar o site responsivo -->
        <meta name="viewport" content="width=device-width, initial-scale=1,
            shrink-to-fit=no">
    </head>
    <body>
        <div class="container">
            <h1>Gerador JSON</h1>

                    <label for="field1">Input :</label>
                    <input type="text" class="form-control" id="generator"
                        name="field1" value="">


                <div class="d-flex justify-content-between m-4">
                    <button type="button" class="btn btn-primary"
                        onclick="addInput()">Adicionar Campo</button>

                </div>
            </section>
<div class="container">
    <h1 id="title-form" class=" m-3 visually-hidden">Formulario :</h1>
    <form id="form">
        <div id="inputs">
            <div class="form-group">

            </div>

        </div>
        <button type="button" class="btn btn-success m-3 visually-hidden
        " onclick="gerarJON()" id="gerarJSON">Gerar JSON</button>

    </form>
</div>
<div class="container"> <h2>JSON:</h2></div>
<div id="campo" class="container bg-light p-4 mt-4">



</div>
</div>

        <!-- Inclua o JavaScript do Bootstrap e o jQuery -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script>
        const form = document.getElementById('form');
        const btnGerar = document.getElementById('gerarJSON');
        const title = document.getElementById('title-form')


		function addInput() {
			// Cria um novo elemento de div para o novo input
			var newDiv = document.createElement('div');
			newDiv.setAttribute('class', 'form-group');

			// Cria um novo elemento de rótulo para o novo input
			var newLabel = document.createElement('label');
			newLabel.setAttribute('for', $("#generator").val());
			newLabel.setAttribute('id', $("#generator").val()+(document.getElementsByTagName('input').length + 1));

            newLabel.setAttribute('class', 'col-form-label');
			newLabel.innerHTML = $("#generator").val();

			// Cria um novo elemento de input para o novo campo
			var newInput = document.createElement('input');
			newInput.setAttribute('type', 'text');
			newInput.setAttribute('class', 'form-control');
			newInput.setAttribute('id', $("#generator").val());
			newInput.setAttribute('name', $("#generator").val());
			newInput.setAttribute('value', '');

			// Adiciona o novo rótulo e novo campo ao novo elemento div
			newDiv.appendChild(newLabel);
			newDiv.appendChild(newInput);

			// Adiciona o novo elemento div ao formulário
			document.getElementById('inputs').appendChild(newDiv);
            $("#generator").val("");
            btnGerar.classList.remove('visually-hidden');
            title.classList.remove('visually-hidden');
		}



function gerarJON ( ){

var formulario = form;
var inputs = form.querySelectorAll("input");

if(inputs.length){
    let objeto = {};
// Loop através de cada input e exibe o valor no console
inputs.forEach((input,index)=> {

    let chave = input.id;
    var label = document.querySelector("#" +input.id+`${index+2}`);
    console.log("#" +input.id+`${index+2}`);
    console.log(chave);
objeto[chave] = input.value ;


});
console.log(objeto)


campo = document.getElementById('campo');
campo.innerHTML=''
campo.innerHTML += ` <pre><code>[ ${JSON.stringify(objeto)} ]</code></pre>`;

}
}



	</script>
    </body>
</html>